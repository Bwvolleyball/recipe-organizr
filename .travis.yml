sudo: false

before_cache:
        - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
        - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

stages:
  - compile

jobs:
  include:
    - stage: compile
      language: java
      jdk: openjdk8
      install: true
      before_script:
        - cd gateway
      script:
        - ./gradlew build --scan -s
    - stage: compile
      language: node_js
      node_js: lts/*
      before_script:
        - npm install -g @angular/cli
        - cd recipe-organizr-ui
      script:
        - npm ci
        - ng lint recipe-organizr-ui
        - ng build --prod --aot
